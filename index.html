<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="GitHub Large Code Analysis : What can be discovered with thousands of GitHub repositories?">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>GitHub Large Code Analysis</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/brainwater/ghlca">View on GitHub</a>

          <h1 id="project_title">GitHub Large Code Analysis</h1>
          <h2 id="project_tagline">What can be discovered with thousands of GitHub repositories?</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/brainwater/ghlca/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/brainwater/ghlca/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a name="motivation" class="anchor" href="#motivation"><span class="octicon octicon-link"></span></a>Motivation</h2>

<p>My motivation for starting the GitHub Large Code Analysis project was not in fact the <a href="https://github.com/blog/1864-third-annual-github-data-challenge">Third Annual GitHub Data Challenge</a>, instead around January 2014 I was interested in doing some sort of BigData type analysis, however I had almost no idea where to start. I came up with the idea to download a bunch of repositories from GitHub and see what I could find by analyzing  all of that code. Of course, like most of my ideas, I promptly forgot about it after getting really excited about it for a week and then realized it would take real work. Later I was reading <a href="news.ycombinator.com">Hacker News</a> and came across an article about <a href="http://awgn.github.io/cgrep/">Cgrep</a>, which sparked my interest in the ghlca project again. I also came across another article about <a href="http://corte.si/posts/code/devsurvey/">The impact of language choice on github projects</a>, which was very much like part of what I wanted to do in the ghlca project. The final thing which got me working on the ghlca project was when a coworker asked if I had heard about the <a href="https://github.com/blog/1864-third-annual-github-data-challenge">Third Annual GitHub Data Challenge</a>, which finally gave me a deadline.</p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>The first problem that needed solving was to determine which github repositories were the most 'valuable' repositories. I determined three ways of judging the 'value' of a repository using the dataset on Google BigQuery. Either by the most number of watchers, the most number of forks, or the highest value for watchers * forks. For the competition, I simply used about the top 5000 repositories with the most watchers, since I was under a time limit. The following was the code used to get those repositories, which I had found this on StackOverflow (unfortunately, I can't find it anymore).</p>

<pre><code>SELECT
  *
FROM [publicdata:samples.github_timeline] a
JOIN EACH
  (
     SELECT MAX(created_at) as max_created, repository_url 
     FROM [publicdata:samples.github_timeline]
     GROUP EACH BY repository_url
  ) b
  ON 
  b.max_created = a.created_at and
  b.repository_url = a.repository_url
ORDER BY repository_watchers desc
LIMIT 5000
</code></pre>

<h2>
<a name="observations-of-note" class="anchor" href="#observations-of-note"><span class="octicon octicon-link"></span></a>Observations of Note</h2>

<p>While doing the initial development of my word counting python scripts, I used the <a href="https://github.com/apache/cassandra">Apache Cassandra</a> repository for testing (filtering for only the Java files), and discovered that the number of left and right parenthesis did not match, instead there were more left parenthesis than right. This could be explained by frown faces in the comments, however there were also more left curly braces '{' than right curly braces '}', and more left square brackets '[' than right square brackets ']'.</p>

<h2>
<a name="most-common-languages" class="anchor" href="#most-common-languages"><span class="octicon octicon-link"></span></a>Most Common Languages</h2>

<p>TODO: List of the most common languages by file count, character count, sloc, and possibly loc.</p>

<h2>
<a name="word-and-character-frequency" class="anchor" href="#word-and-character-frequency"><span class="octicon octicon-link"></span></a>Word and Character Frequency</h2>

<p>For the GitHub competition, I decided to focus on word and character counts of the files. I found some very interesting results from this data.
One of the issues I ran into was determining how to count 'words'. Following the literature only for how to count words in python, the python <a href="https://docs.python.org/3.4/library/collections.html#collections.Counter">Counter</a> was used after the text had been split into an array of words using <code>text.split()</code>. I determined that this caused some unexpected complications when dealing with code due to how source code is parsed, for example that curly braces and such can sometimes be separated with whitespace from a variable, and sometimes not. With some more research, I determined that I should also use the regex word character class by running <code>re.split("[\W]+", text)</code> to split the text into words. I also counted the characters since I determined that it may be useful after I saw a mismatch in the number of left and right curly brackets when counting words with <code>text.split()</code>, and realized I would have to do a character count to determine if there was a mismatch.</p>

<h3>
<a name="character-frequency" class="anchor" href="#character-frequency"><span class="octicon octicon-link"></span></a>Character Frequency</h3>

<p>TODO: Graph of most common characters
TODO: Graphs of characters most specific to each of the most common languages</p>

<h3>
<a name="word-frequency" class="anchor" href="#word-frequency"><span class="octicon octicon-link"></span></a>Word Frequency</h3>

<p>TODO: Graph of most common words
TODO: Graphs of words most specific to each of the most common languages</p>

<h3>
<a name="whitespace-separated-word-frequency" class="anchor" href="#whitespace-separated-word-frequency"><span class="octicon octicon-link"></span></a>Whitespace Separated Word Frequency</h3>

<p>I also did word counts using the words produced by calling text.split() against the text of a file, however it produced the least valuable data of each of character frequency and words defined by the word character class in regex. However here are some graphs of that data.
TODO: Graph of most common whitespace separated words
TODO: Graphs of whitespace separated words specific to each of the most common languages</p>

<h2>
<a name="mismatched-brackets" class="anchor" href="#mismatched-brackets"><span class="octicon octicon-link"></span></a>Mismatched Brackets</h2>

<p>While testing the character counting code against the <a href="https://github.com/apache/cassandra">Apache Cassandra</a> repository I discovered that all of the types of brackets did not have a matching number of left and right occurrences.
TODO: Get ratios of each of the bracket types for the left and right versions
TODO: Get percentage of files that have mismatched brackets for each type of bracket
TODO: Get percentage of repositories that have a file with mismatched brackets for each type of bracket</p>

<h3>
<a name="angular-brackets" class="anchor" href="#angular-brackets"><span class="octicon octicon-link"></span></a>Angular Brackets</h3>

<p>Angular brackets <code>&lt;&gt;</code> are the easiest to explain why they did not match, since they are often used without matching for greater than or less than comparisons e.g. <code>for(int i=0; i &lt; 10; i++){ System.out.println(i); }</code> or for various other things, like type annotations in Haskell e.g. <code>fib :: Int -&gt; Integer</code> (source: <a href="http://en.wikipedia.org/wiki/Haskell_%28programming_language%29">Haskell Wikipedia Page</a>).
TODO: Insert link to a file that has a mismatched number of left and right angular brackets from apache cassandra</p>

<h3>
<a name="parentheses" class="anchor" href="#parentheses"><span class="octicon octicon-link"></span></a>Parentheses</h3>

<p>Parentheses are also quite easy to explain, since they are commonly used without matching in emoticons such as <code>:)</code> or <code>:(</code>.
TODO: Determine any other causes of parentheses mismatch by filtering out files with mismatched parentheses when ignoring all of the types of emoticons in the <a href="http://en.wikipedia.org/wiki/List_of_emoticons">Emoticon Wikipedia Page</a>.
TODO: Insert a link to a file with mismatched parentheses from apache cassandra</p>

<h3>
<a name="square-brackets" class="anchor" href="#square-brackets"><span class="octicon octicon-link"></span></a>Square Brackets</h3>

<p>I find it surprising that left and right square brackets don't match, even for a single repository like the Apache Cassandra repository. They are not commonly used in emoticons in my experience, and I cannot think of any language constructs that would have a mismatched square bracket (and while testing against apache/cassandra, I only used the java source code files).</p>

<p>While naming this section, I discovered that parentheses <code>()</code>, curly braces <code>{}</code>, square brackets <code>[]</code> (what I used to refer to as brackets), and angular brackets <code>&lt;&gt;</code> are all types of brackets (source: <a href="http://www.mathsisfun.com/algebra/brackets.html">Math is Fun Brackets</a>).</p>

<h2>
<a name="repositories-used" class="anchor" href="#repositories-used"><span class="octicon octicon-link"></span></a>Repositories Used</h2>

<p>TODO: Link to a list of the repositories used and the commit hash that they were at when you got them</p>

<h2>
<a name="bugs-encountered" class="anchor" href="#bugs-encountered"><span class="octicon octicon-link"></span></a>Bugs Encountered</h2>

<p>I encountered quite a few bugs in the software I was using, from bugs in python, to bugs in the github-linguist library for determining the language of source code files. I will be submitting bug reports for github linguist and will likely do some work on fixing them, since it would be a great way for me to contribute to an open source application in a meaningful way. In python I encountered some segfaults (so far I have had python segfault 3 times) but am unable to reproduce the segfault consistently. I also encountered issues while reading source code files with unicode, since many source files have invalid unicode characters. I would ilke a way to read a file as text, but to be able to either skip the characters that are invalid unicode, or to treat them in some special way. I believe most of these files were for tests, and some of them were for testing what happens on invalid input.</p>

<h2>
<a name="acknowledgements" class="anchor" href="#acknowledgements"><span class="octicon octicon-link"></span></a>Acknowledgements</h2>

<p>I would like to thank Aldo Cortesi (<a href="https://github.com/cortesi" class="user-mention">@cortesi</a>) for his post on his work downloading a bunch of github repositories at <a href="http://corte.si/posts/code/devsurvey/">The impact of language choice on github projects</a>.
I used the <a href="http://www.convertcsv.com/json-to-csv.htm">Convert JSON to CSV</a> site for converting my results from scripts that were in JSON to CSV so that I could import it into LibreOffice Calc for making graphs.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">GitHub Large Code Analysis maintained by <a href="https://github.com/brainwater">brainwater</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
